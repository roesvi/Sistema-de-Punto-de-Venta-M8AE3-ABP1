import{_ as W,c as i,a as t,b as M,d as k,w as r,v as P,k as x,F as h,r as _,t as n,n as y,l as z,g as b,h as C,j as d}from"./index-1NJw5fJc.js";const J={name:"Products",setup(){const u=b([{id:1,name:"Producto de Ejemplo",sku:"PROD001",description:"Descripción del producto de ejemplo",price:999e4,stock:15,lowStockThreshold:5,categoryId:1,image:"",active:!0}]),e=b([{id:1,name:"Electrónicos"},{id:2,name:"Ropa"},{id:3,name:"Hogar"},{id:4,name:"Deportes"}]),c=b({search:"",category:"",status:""}),o=b(!1),g=b(null),m=b({name:"",sku:"",description:"",price:0,stock:0,lowStockThreshold:5,categoryId:1,image:"",active:!0}),s=b(1),v=b(10),p=C(()=>u.value.filter(l=>{const a=!c.value.search||l.name.toLowerCase().includes(c.value.search.toLowerCase())||l.sku&&l.sku.toLowerCase().includes(c.value.search.toLowerCase()),f=!c.value.category||l.categoryId===parseInt(c.value.category);let I=!0;return c.value.status==="active"?I=l.active===!0:c.value.status==="inactive"&&(I=l.active===!1),a&&f&&I})),S=C(()=>{const l=(s.value-1)*v.value,a=l+v.value;return p.value.slice(l,a)}),A=C(()=>Math.ceil(p.value.length/v.value)),N=l=>{const a=e.value.find(f=>f.id===l);return a?a.name:"Sin categoría"},U=l=>l.active?"bg-success":"bg-secondary",T=l=>new Intl.NumberFormat("es-CL").format(l),j=()=>{c.value={search:"",category:"",status:""},s.value=1},D=()=>{g.value=null,m.value={name:"",sku:"",description:"",price:0,stock:0,lowStockThreshold:5,categoryId:1,image:"",active:!0},o.value=!0},V=l=>{g.value=l.id,m.value={...l},o.value=!0},B=l=>{console.log("View product:",l)},L=l=>{confirm(`¿Estás seguro de eliminar el producto "${l.name}"?`)&&(u.value=u.value.filter(a=>a.id!==l.id))},R=()=>{if(!m.value.name||!m.value.price){alert("Por favor complete los campos requeridos");return}if(g.value){const l=u.value.findIndex(a=>a.id===g.value);l!==-1&&(u.value[l]={...m.value})}else{const l=Math.max(0,...u.value.map(a=>a.id))+1;u.value.push({...m.value,id:l})}w()},w=()=>{o.value=!1,g.value=null};return{products:u,categories:e,filters:c,showAddProductModal:o,editingProduct:g,currentProduct:m,currentPage:s,itemsPerPage:v,filteredProducts:p,paginatedProducts:S,totalPages:A,getCategoryName:N,getStatusClass:U,formatPrice:T,resetFilters:j,addNewProduct:D,editProduct:V,viewProduct:B,confirmDelete:L,saveProduct:R,closeModal:w,handleImageUpload:l=>{const a=l.target.files[0];if(a){const f=new FileReader;f.onload=I=>{m.value.image=I.target.result},f.readAsDataURL(a)}}}}},E={class:"products-management"},F={class:"container-fluid"},H={class:"d-flex justify-content-between align-items-center mb-4"},Z={class:"card mb-4"},G={class:"card-body"},Y={class:"row g-3"},q={class:"col-md-4"},K={class:"input-group"},X={class:"col-md-3"},O=["value"],Q={class:"col-md-3"},$={class:"col-md-2 d-flex align-items-end"},tt={class:"card"},et={class:"card-body p-0"},ot={class:"table-responsive"},st={class:"table table-hover align-middle mb-0"},lt={key:0},at={class:"d-flex align-items-center"},nt={class:"product-image me-3"},it=["src","alt"],rt={class:"mb-0"},dt={class:"text-muted"},ct={class:"text-end"},ut={class:"text-center"},mt={class:"text-center"},vt={class:"text-end"},bt={class:"btn-group btn-group-sm"},gt=["onClick"],Pt=["onClick"],ft=["onClick"],kt={class:"d-flex justify-content-between align-items-center p-3 border-top"},yt={class:"text-muted"},It={class:"pagination mb-0"},ht=["onClick"],_t={class:"modal-dialog modal-lg"},pt={class:"modal-content"},xt={class:"modal-header"},Ct={class:"modal-title"},wt={class:"modal-body"},Mt={class:"row g-3"},St={class:"col-md-8"},At={class:"mb-3"},Nt={class:"row"},Ut={class:"col-md-6"},Tt={class:"mb-3"},jt={class:"input-group"},Dt={class:"col-md-6"},Vt={class:"mb-3"},Bt=["value"],Lt={class:"mb-3"},Rt={class:"col-md-4"},Wt={class:"mb-3"},zt={class:"border rounded p-3 text-center"},Jt=["src"],Et={class:"form-check form-switch mb-3"},Ft={class:"form-check-label",for:"activeSwitch"},Ht={class:"row"},Zt={class:"col-md-4"},Gt={class:"mb-3"},Yt={class:"col-md-4"},qt={class:"mb-3"},Kt={class:"col-md-4"},Xt={class:"mb-3"},Ot={class:"modal-footer"},Qt={key:0,class:"modal-backdrop fade show"};function $t(u,e,c,o,g,m){return d(),i("div",E,[t("div",F,[t("div",H,[e[21]||(e[21]=t("h2",null,"Gestión de Productos",-1)),t("div",null,[t("button",{class:"btn btn-primary me-2",onClick:e[0]||(e[0]=s=>o.showAddProductModal=!0)},[...e[19]||(e[19]=[t("i",{class:"bi bi-plus-lg me-1"},null,-1),k(" Nuevo Producto ",-1)])]),e[20]||(e[20]=t("button",{class:"btn btn-outline-secondary"},[t("i",{class:"bi bi-upload me-1"}),k(" Importar ")],-1))])]),t("div",Z,[t("div",G,[t("div",Y,[t("div",q,[e[23]||(e[23]=t("label",{class:"form-label"},"Buscar",-1)),t("div",K,[e[22]||(e[22]=t("span",{class:"input-group-text"},[t("i",{class:"bi bi-search"})],-1)),r(t("input",{type:"text",class:"form-control",placeholder:"Buscar productos...","onUpdate:modelValue":e[1]||(e[1]=s=>o.filters.search=s)},null,512),[[P,o.filters.search]])])]),t("div",X,[e[25]||(e[25]=t("label",{class:"form-label"},"Categoría",-1)),r(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=s=>o.filters.category=s)},[e[24]||(e[24]=t("option",{value:""},"Todas las categorías",-1)),(d(!0),i(h,null,_(o.categories,s=>(d(),i("option",{key:s.id,value:s.id},n(s.name),9,O))),128))],512),[[x,o.filters.category]])]),t("div",Q,[e[27]||(e[27]=t("label",{class:"form-label"},"Estado",-1)),r(t("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=s=>o.filters.status=s)},[...e[26]||(e[26]=[t("option",{value:""},"Todos",-1),t("option",{value:"active"},"Activos",-1),t("option",{value:"inactive"},"Inactivos",-1)])],512),[[x,o.filters.status]])]),t("div",$,[t("button",{class:"btn btn-outline-secondary w-100",onClick:e[4]||(e[4]=(...s)=>o.resetFilters&&o.resetFilters(...s))},[...e[28]||(e[28]=[t("i",{class:"bi bi-arrow-counterclockwise me-1"},null,-1),k(" Restablecer ",-1)])])])])])]),t("div",tt,[t("div",et,[t("div",ot,[t("table",st,[e[33]||(e[33]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Producto"),t("th",null,"Categoría"),t("th",{class:"text-end"},"Precio"),t("th",{class:"text-center"},"Stock"),t("th",{class:"text-center"},"Estado"),t("th",{class:"text-end"},"Acciones")])],-1)),t("tbody",null,[o.filteredProducts.length===0?(d(),i("tr",lt,[...e[29]||(e[29]=[t("td",{colspan:"6",class:"text-center py-4"},[t("div",{class:"text-muted"},[t("i",{class:"bi bi-inbox",style:{"font-size":"2rem"}}),t("p",{class:"mt-2 mb-0"},"No se encontraron productos")])],-1)])])):M("",!0),(d(!0),i(h,null,_(o.paginatedProducts,s=>(d(),i("tr",{key:s.id},[t("td",null,[t("div",at,[t("div",nt,[t("img",{src:s.image||"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNhYWEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cmVjdCB4PSIzIiB5PSIzIiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHJ4PSIyIiByeT0iMiI+PC9yZWN0PjxjaXJjbGUgY3g9IjguNSIgY3k9IjguNSIgcj0iMi41Ij48L2NpcmNsZT48cGF0aCBkPSJNMjEgMTVhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJ2LTRsMTQtN3oiPjwvcGF0aD48L3N2Zz4=",alt:s.name,class:"rounded"},null,8,it)]),t("div",null,[t("h6",rt,n(s.name),1),t("small",dt,"SKU: "+n(s.sku||"N/A"),1)])])]),t("td",null,n(o.getCategoryName(s.categoryId)),1),t("td",ct,"$"+n(o.formatPrice(s.price)),1),t("td",ut,[t("span",{class:y({"text-danger":s.stock<=s.lowStockThreshold})},n(s.stock),3)]),t("td",mt,[t("span",{class:y([o.getStatusClass(s),"badge"])},n(s.active?"Activo":"Inactivo"),3)]),t("td",vt,[t("div",bt,[t("button",{class:"btn btn-outline-primary",onClick:v=>o.editProduct(s)},[...e[30]||(e[30]=[t("i",{class:"bi bi-pencil"},null,-1)])],8,gt),t("button",{class:"btn btn-outline-secondary",onClick:v=>o.viewProduct(s)},[...e[31]||(e[31]=[t("i",{class:"bi bi-eye"},null,-1)])],8,Pt),t("button",{class:"btn btn-outline-danger",onClick:v=>o.confirmDelete(s)},[...e[32]||(e[32]=[t("i",{class:"bi bi-trash"},null,-1)])],8,ft)])])]))),128))])])]),t("div",kt,[t("div",yt," Mostrando "+n(Math.min((o.currentPage-1)*o.itemsPerPage+1,o.filteredProducts.length))+" a "+n(Math.min(o.currentPage*o.itemsPerPage,o.filteredProducts.length))+" de "+n(o.filteredProducts.length)+" productos ",1),t("nav",null,[t("ul",It,[t("li",{class:y(["page-item",{disabled:o.currentPage===1}])},[t("button",{class:"page-link",onClick:e[5]||(e[5]=s=>o.currentPage--)},"Anterior")],2),(d(!0),i(h,null,_(o.totalPages,s=>(d(),i("li",{key:s,class:y(["page-item",{active:o.currentPage===s}])},[t("button",{class:"page-link",onClick:v=>o.currentPage=s},n(s),9,ht)],2))),128)),t("li",{class:y(["page-item",{disabled:o.currentPage===o.totalPages}])},[t("button",{class:"page-link",onClick:e[6]||(e[6]=s=>o.currentPage++)},"Siguiente")],2)])])])])])]),t("div",{class:y(["modal fade",{"show d-block":o.showAddProductModal}]),tabindex:"-1"},[t("div",_t,[t("div",pt,[t("div",xt,[t("h5",Ct,n(o.editingProduct?"Editar Producto":"Agregar Nuevo Producto"),1),t("button",{type:"button",class:"btn-close",onClick:e[7]||(e[7]=(...s)=>o.closeModal&&o.closeModal(...s))})]),t("div",wt,[t("div",Mt,[t("div",St,[t("div",At,[e[34]||(e[34]=t("label",{class:"form-label"},[k("Nombre del Producto "),t("span",{class:"text-danger"},"*")],-1)),r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=s=>o.currentProduct.name=s),required:""},null,512),[[P,o.currentProduct.name]])]),t("div",Nt,[t("div",Ut,[t("div",Tt,[e[36]||(e[36]=t("label",{class:"form-label"},[k("Precio "),t("span",{class:"text-danger"},"*")],-1)),t("div",jt,[e[35]||(e[35]=t("span",{class:"input-group-text"},"$",-1)),r(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=s=>o.currentProduct.price=s),min:"0",step:"0.01",required:""},null,512),[[P,o.currentProduct.price,void 0,{number:!0}]])])])]),t("div",Dt,[t("div",Vt,[e[37]||(e[37]=t("label",{class:"form-label"},[k("Categoría "),t("span",{class:"text-danger"},"*")],-1)),r(t("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=s=>o.currentProduct.categoryId=s),required:""},[(d(!0),i(h,null,_(o.categories,s=>(d(),i("option",{key:s.id,value:s.id},n(s.name),9,Bt))),128))],512),[[x,o.currentProduct.categoryId]])])])]),t("div",Lt,[e[38]||(e[38]=t("label",{class:"form-label"},"Descripción",-1)),r(t("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":e[11]||(e[11]=s=>o.currentProduct.description=s)},null,512),[[P,o.currentProduct.description]])])]),t("div",Rt,[t("div",Wt,[e[39]||(e[39]=t("label",{class:"form-label"},"Imagen del Producto",-1)),t("div",zt,[t("img",{src:o.currentProduct.image||`https://ui-avatars.com/api/?name=${o.currentProduct.name?encodeURIComponent(o.currentProduct.name):"P"}&background=random`,class:"img-fluid mb-2",style:{"max-height":"150px"}},null,8,Jt),t("input",{type:"file",class:"form-control",onChange:e[12]||(e[12]=(...s)=>o.handleImageUpload&&o.handleImageUpload(...s))},null,32)])]),t("div",Et,[r(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=s=>o.currentProduct.active=s),id:"activeSwitch"},null,512),[[z,o.currentProduct.active]]),t("label",Ft,n(o.currentProduct.active?"Activo":"Inactivo"),1)])])]),t("div",Ht,[t("div",Zt,[t("div",Gt,[e[40]||(e[40]=t("label",{class:"form-label"},"Cantidad en Stock",-1)),r(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[14]||(e[14]=s=>o.currentProduct.stock=s),min:"0"},null,512),[[P,o.currentProduct.stock,void 0,{number:!0}]])])]),t("div",Yt,[t("div",qt,[e[41]||(e[41]=t("label",{class:"form-label"},"Stock Mínimo",-1)),r(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[15]||(e[15]=s=>o.currentProduct.lowStockThreshold=s),min:"1"},null,512),[[P,o.currentProduct.lowStockThreshold,void 0,{number:!0}]]),e[42]||(e[42]=t("small",{class:"text-muted"},"Alerta cuando el stock esté por debajo de este número",-1))])]),t("div",Kt,[t("div",Xt,[e[43]||(e[43]=t("label",{class:"form-label"},"SKU",-1)),r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[16]||(e[16]=s=>o.currentProduct.sku=s)},null,512),[[P,o.currentProduct.sku]])])])])]),t("div",Ot,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[17]||(e[17]=(...s)=>o.closeModal&&o.closeModal(...s))},"Cancelar"),t("button",{type:"button",class:"btn btn-primary",onClick:e[18]||(e[18]=(...s)=>o.saveProduct&&o.saveProduct(...s))},n(o.editingProduct?"Actualizar Producto":"Agregar Producto"),1)])])])],2),o.showAddProductModal?(d(),i("div",Qt)):M("",!0)])}const oe=W(J,[["render",$t],["__scopeId","data-v-8bbf4bce"]]);export{oe as default};
