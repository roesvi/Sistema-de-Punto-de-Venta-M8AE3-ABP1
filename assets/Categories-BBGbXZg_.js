import{_ as z,c as i,a as e,b as B,d as p,F as y,r as h,m as _,n as v,t as m,e as w,w as A,v as D,g as c,h as S,o as U,j as r}from"./index-1NJw5fJc.js";const q={name:"Categories",setup(){const n=c([{id:1,name:"Electrónicos",description:"Dispositivos electrónicos y accesorios",color:"#4361ee",icon:"bi-laptop",createdAt:new Date},{id:2,name:"Ropa",description:"Ropa y accesorios de moda",color:"#f72585",icon:"bi-tshirt",createdAt:new Date},{id:3,name:"Hogar",description:"Artículos para el hogar",color:"#4cc9f0",icon:"bi-house",createdAt:new Date},{id:4,name:"Deportes",description:"Artículos deportivos",color:"#4ad66d",icon:"bi-bicycle",createdAt:new Date}]),t=c([{id:1,name:"Laptop",categoryId:1,active:!0},{id:2,name:"Smartphone",categoryId:1,active:!0},{id:3,name:"Camiseta",categoryId:2,active:!0},{id:4,name:"Pantalón",categoryId:2,active:!1},{id:5,name:"Sofá",categoryId:3,active:!0},{id:6,name:"Mesa",categoryId:3,active:!0},{id:7,name:"Balón de fútbol",categoryId:4,active:!0}]),b=c(!1),o=c(null),g=c(null),f=c(""),s=["#4361ee","#3f37c9","#4895ef","#4cc9f0","#4ad66d","#b5179e","#f72585","#7209b7","#560bad","#480ca8"],u=["bi-tag","bi-laptop","bi-phone","bi-headphones","bi-tshirt","bi-basket","bi-house","bi-bicycle","bi-book","bi-cup-straw"],d=c({name:"",description:"",color:"#4361ee",icon:"bi-tag"}),M=S(()=>{if(!f.value)return n.value;const a=f.value.toLowerCase();return n.value.filter(l=>l.name.toLowerCase().includes(a)||l.description&&l.description.toLowerCase().includes(a))}),C=a=>t.value.filter(l=>l.categoryId===a).length,I=a=>t.value.filter(l=>l.categoryId===a&&l.active).length,P=a=>t.value.filter(l=>l.categoryId===a&&!l.active).length,E=a=>{const l=t.value.length;return l===0?0:Math.round(C(a)/l*100)},N=a=>{g.value=g.value===a?null:a},k=()=>{b.value=!1,o.value=null,d.value={name:"",description:"",color:"#4361ee",icon:"bi-tag"}},L=()=>{o.value=null,d.value={name:"",description:"",color:"#4361ee",icon:"bi-tag"},b.value=!0},j=a=>{o.value=a.id,d.value={...a},b.value=!0},O=()=>{if(!d.value.name){alert("Por favor ingrese un nombre para la categoría");return}if(o.value){const a=n.value.findIndex(l=>l.id===o.value);a!==-1&&(n.value[a]={...d.value})}else{const a=Math.max(0,...n.value.map(l=>l.id))+1;n.value.push({...d.value,id:a,createdAt:new Date})}k()},V=a=>{if(C(a.id)>0){alert("No se puede eliminar una categoría que tiene productos asociados");return}confirm(`¿Estás seguro de eliminar la categoría "${a.name}"?`)&&(n.value=n.value.filter(l=>l.id!==a.id))},x=a=>{a.target.closest(".dropdown")||(g.value=null)};return U(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)})),{categories:n,showAddCategoryModal:b,editingCategory:o,currentCategory:d,searchQuery:f,colorOptions:s,iconOptions:u,activeDropdown:g,filteredCategories:M,getProductCount:C,getActiveProducts:I,getInactiveProducts:P,getCategoryUsage:E,toggleDropdown:N,addNewCategory:L,editCategory:j,saveCategory:O,confirmDelete:V,closeModal:k}}},F={class:"categories-management"},R={class:"container-fluid"},T={class:"d-flex justify-content-between align-items-center mb-4"},G={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4"},H={class:"col"},Q={class:"card h-100"},J={class:"card-body"},K={class:"d-flex justify-content-between align-items-start mb-3"},W={class:"d-flex align-items-center"},X={class:"mb-0"},Y={class:"text-muted"},Z={class:"dropdown"},$=["onClick"],ee=["onClick"],te=["onClick"],oe={class:"progress mb-2",style:{height:"4px"}},se={class:"d-flex justify-content-between small text-muted"},ae={class:"modal-dialog"},le={class:"modal-content"},ne={class:"modal-header"},ie={class:"modal-title"},re={class:"modal-body"},de={class:"mb-3"},ce={class:"mb-3"},ue={class:"row"},ve={class:"col-md-6"},me={class:"mb-3"},be={class:"d-flex flex-wrap gap-2"},ge=["onClick"],fe={class:"col-md-6"},pe={class:"mb-3"},Ce={class:"d-flex flex-wrap gap-2"},ye=["onClick"],he={class:"modal-footer"},_e={key:0,class:"modal-backdrop fade show"};function we(n,t,b,o,g,f){return r(),i("div",F,[e("div",R,[e("div",T,[t[8]||(t[8]=e("div",null,[e("h2",{class:"mb-0"},"Categorías"),e("p",{class:"text-muted mb-0"},"Administra las categorías de productos")],-1)),e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=s=>o.showAddCategoryModal=!0)},[...t[7]||(t[7]=[e("i",{class:"bi bi-plus-lg me-1"},null,-1),p(" Nueva Categoría ",-1)])])]),e("div",G,[e("div",H,[e("div",{class:"card h-100 border-dashed",onClick:t[1]||(t[1]=s=>o.showAddCategoryModal=!0),style:{cursor:"pointer"}},[...t[9]||(t[9]=[e("div",{class:"card-body d-flex flex-column align-items-center justify-content-center text-center p-5"},[e("div",{class:"bg-light rounded-circle p-3 mb-3"},[e("i",{class:"bi bi-plus-lg text-primary",style:{"font-size":"1.5rem"}})]),e("h5",{class:"mb-0"},"Agregar Categoría")],-1)])])]),(r(!0),i(y,null,h(o.filteredCategories,s=>(r(),i("div",{class:"col",key:s.id},[e("div",Q,[e("div",J,[e("div",K,[e("div",W,[e("div",{class:"category-icon me-3",style:_({backgroundColor:s.color+"20",color:s.color})},[e("i",{class:v(s.icon||"bi-tag")},null,2)],4),e("div",null,[e("h5",X,m(s.name),1),e("small",Y,m(o.getProductCount(s.id))+" productos",1)])]),e("div",Z,[e("button",{class:"btn btn-link text-muted p-0",type:"button",onClick:w(u=>o.toggleDropdown(s.id),["stop"])},[...t[10]||(t[10]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)])],8,$),e("ul",{class:v(["dropdown-menu",{show:o.activeDropdown===s.id}])},[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:w(u=>o.editCategory(s),["stop"])},[...t[11]||(t[11]=[e("i",{class:"bi bi-pencil me-2"},null,-1),p("Editar",-1)])],8,ee)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:w(u=>o.confirmDelete(s),["stop"])},[...t[12]||(t[12]=[e("i",{class:"bi bi-trash me-2"},null,-1),p("Eliminar",-1)])],8,te)])],2)])]),e("div",oe,[e("div",{class:"progress-bar",style:_({width:o.getCategoryUsage(s.id)+"%",backgroundColor:s.color})},null,4)]),e("div",se,[e("span",null,m(o.getActiveProducts(s.id))+" activos",1),e("span",null,m(o.getInactiveProducts(s.id))+" inactivos",1)])])])]))),128))])]),e("div",{class:v(["modal fade",{"show d-block":o.showAddCategoryModal}]),tabindex:"-1"},[e("div",ae,[e("div",le,[e("div",ne,[e("h5",ie,m(o.editingCategory?"Editar Categoría":"Nueva Categoría"),1),e("button",{type:"button",class:"btn-close",onClick:t[2]||(t[2]=(...s)=>o.closeModal&&o.closeModal(...s))})]),e("div",re,[e("div",de,[t[13]||(t[13]=e("label",{class:"form-label"},[p("Nombre de la categoría "),e("span",{class:"text-danger"},"*")],-1)),A(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>o.currentCategory.name=s),required:""},null,512),[[D,o.currentCategory.name]])]),e("div",ce,[t[14]||(t[14]=e("label",{class:"form-label"},"Descripción",-1)),A(e("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":t[4]||(t[4]=s=>o.currentCategory.description=s)},null,512),[[D,o.currentCategory.description]])]),e("div",ue,[e("div",ve,[e("div",me,[t[15]||(t[15]=e("label",{class:"form-label"},"Color",-1)),e("div",be,[(r(!0),i(y,null,h(o.colorOptions,s=>(r(),i("div",{key:s,class:v(["color-option",{selected:o.currentCategory.color===s}]),style:_({backgroundColor:s}),onClick:u=>o.currentCategory.color=s},null,14,ge))),128))])])]),e("div",fe,[e("div",pe,[t[16]||(t[16]=e("label",{class:"form-label"},"Ícono",-1)),e("div",Ce,[(r(!0),i(y,null,h(o.iconOptions,s=>(r(),i("div",{key:s,class:v(["icon-option",{selected:o.currentCategory.icon===s}]),onClick:u=>o.currentCategory.icon=s},[e("i",{class:v(s)},null,2)],10,ye))),128))])])])])]),e("div",he,[e("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=(...s)=>o.closeModal&&o.closeModal(...s))},"Cancelar"),e("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=(...s)=>o.saveCategory&&o.saveCategory(...s))},m(o.editingCategory?"Actualizar":"Guardar"),1)])])])],2),o.showAddCategoryModal?(r(),i("div",_e)):B("",!0)])}const xe=z(q,[["render",we],["__scopeId","data-v-e9052b49"]]);export{xe as default};
