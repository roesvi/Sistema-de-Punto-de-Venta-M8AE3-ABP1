import{_ as et,c as a,a as t,b,d,w as u,v as y,k as I,t as i,F as D,r as M,m as U,n as g,e as st,p as E,l as ot,g as w,h as N,o as lt,j as r}from"./index-1NJw5fJc.js";const nt={name:"Customers",setup(){const c=w([{id:1,type:"individual",firstName:"Rober",lastName:"Escobar",email:"rober.escobar@example.com",phone:"+56912345678",address:"Av. Providencia 1234",city:"Santiago",postalCode:"7500000",taxId:"12.345.678-9",isActive:!0,orderCount:5,totalSpent:125e4,lastPurchase:new Date("2023-11-05T14:30:00"),createdAt:new Date("2023-01-15T10:00:00"),notes:"Cliente frecuente, prefiere contacto por email."},{id:2,type:"business",businessName:"TecnoSoluciones SpA",contactName:"María González",email:"contacto@tecnosoluciones.cl",phone:"+56987654321",address:"Av. Apoquindo 4500",city:"Las Condes",postalCode:"7550000",taxId:"76.543.210-8",isActive:!0,orderCount:12,totalSpent:325e4,lastPurchase:new Date("2023-11-08T11:15:00"),createdAt:new Date("2022-11-20T09:30:00"),notes:"Empresa con descuento corporativo del 10%."}]),e=w({search:"",type:"",status:""}),k=w(!1),s=w(!1),A=w(!1),p=w(P()),o=w(null),h=w(1),V=10,x=N(()=>Array.isArray(c.value)?c.value.filter(l=>{if(!l)return!1;const n=l.type==="business"?l.businessName||"":`${l.firstName||""} ${l.lastName||""}`.trim(),m=(e.value.search||"").toLowerCase(),v=!m||n.toLowerCase().includes(m)||(l.email||"").toLowerCase().includes(m)||(l.phone||"").includes(e.value.search),f=!e.value.type||l.type===e.value.type,_=e.value.status===""||e.value.status==="active"&&l.isActive||e.value.status==="inactive"&&!l.isActive;return v&&f&&_}).sort((l,n)=>!l||!n||!l.lastPurchase&&!n.lastPurchase?0:l.lastPurchase?n.lastPurchase?new Date(n.lastPurchase)-new Date(l.lastPurchase):-1:1)||[]:[]),z=N(()=>{if(!x.value||!Array.isArray(x.value))return[];const l=(h.value-1)*V,n=l+V;return x.value.slice(l,n)||[]}),j=N(()=>!x.value||!x.value.length?1:Math.ceil(x.value.length/V)||1),R=N(()=>{const l=new Date,n=new Date;n.setDate(l.getDate()-30);const m=c.value.filter(C=>C.isActive).length,v=c.value.filter(C=>new Date(C.createdAt)>=n).length,f=c.value.reduce((C,tt)=>C+(tt.totalSpent||0),0),_=c.value.length>0?Math.round(f/c.value.length):0;return{totalCustomers:c.value.length,activeCustomers:m,newCustomers:v,avgOrderValue:_}}),L=N(()=>{if(!o.value)return[];const l=[];l.push({title:"Cuenta creada",date:o.value.createdAt,description:"El cliente se registró en el sistema",type:"account_created"}),o.value.lastPurchase&&l.push({title:"Última compra",date:o.value.lastPurchase,description:`Realizó una compra por $${S(o.value.totalSpent)}`,type:"purchase",details:`Pedido #${Math.floor(1e3+Math.random()*9e3)}`});const n=[{title:"Actualización de perfil",description:"El cliente actualizó su información de contacto",type:"profile_update"},{title:"Contacto de soporte",description:"El cliente contactó al servicio al cliente",type:"support_contact"},{title:"Revisión de producto",description:"El cliente dejó una reseña de un producto",type:"product_review",details:"Calificación: 5 estrellas"}],m=Math.floor(Math.random()*3)+1,v=[...n].sort(()=>.5-Math.random());for(let f=0;f<m;f++)if(v[f]){const _=Math.floor(Math.random()*30)+1,C=new Date;C.setDate(C.getDate()-_),l.push({...v[f],date:C})}return l.sort((f,_)=>new Date(_.date)-new Date(f.date))});function P(){return{type:"individual",firstName:"",lastName:"",businessName:"",contactName:"",email:"",phone:"",address:"",city:"",postalCode:"",taxId:"",isActive:!0,notes:"",orderCount:0,totalSpent:0,lastPurchase:null,createdAt:new Date}}function S(l){return new Intl.NumberFormat("es-CL").format(l)}function O(l){return l?new Date(l).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}):"N/A"}function B(l){return l?new Date(l).toLocaleString("es-CL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function q(l){return l?l.replace(/(\+56)(\d{2})(\d{4})(\d{4})/,"$1 $2 $3 $4"):""}function F(l){if(!l)return"Nunca";const m=Math.floor((new Date-new Date(l))/1e3),v={año:31536e3,mes:2592e3,semana:604800,día:86400,hora:3600,minuto:60,segundo:1};for(const[f,_]of Object.entries(v)){const C=Math.floor(m/_);if(C>=1)return C===1?`hace ${C} ${f}`:`hace ${C} ${f}s`}return"hace unos segundos"}function G(l){if(!l)return"#6c757d";let n=0;for(let v=0;v<l.length;v++)n=l.charCodeAt(v)+((n<<5)-n);return`hsl(${Math.abs(n%360)}, 70%, 60%)`}function J(l){const n=parseInt(l.slice(1,3),16),m=parseInt(l.slice(3,5),16),v=parseInt(l.slice(5,7),16);return(.299*n+.587*m+.114*v)/255>.5?"#000000":"#ffffff"}function H(l){if(!l)return"?";const n=l.split(" ");return n.length>1?`${n[0].charAt(0)}${n[n.length-1].charAt(0)}`:n[0].charAt(0)}function K(){e.value={search:"",type:"",status:""},h.value=1}function Q(){A.value=!1,p.value=P(),k.value=!0}function W(l){A.value=!0,p.value=JSON.parse(JSON.stringify(l)),k.value=!0,s.value=!1}function X(l){o.value=JSON.parse(JSON.stringify(l)),s.value=!0}function Y(l){console.log("Viewing orders for customer:",l.id),alert(`Mostrando pedidos del cliente: ${l.name}`)}function Z(){if(!p.value.email){alert("Por favor ingrese un correo electrónico");return}if(A.value){const l=c.value.findIndex(n=>n.id===p.value.id);l!==-1&&(c.value[l]={...p.value})}else{const l=Math.max(0,...c.value.map(m=>m.id))+1,n={...p.value,id:l,createdAt:new Date,orderCount:0,totalSpent:0};n.type==="business"?n.name=n.businessName:n.name=`${n.firstName} ${n.lastName}`.trim(),c.value.unshift(n)}T()}function $(l){const n=c.value.findIndex(m=>m.id===l.id);n!==-1&&(c.value[n].isActive=!c.value[n].isActive,o.value&&o.value.id===l.id&&(o.value.isActive=c.value[n].isActive))}function T(){k.value=!1,s.value=!1,p.value=P()}return lt(()=>{}),{filters:e,showCustomerModal:k,showCustomerDetails:s,isEditing:A,currentCustomer:p,currentCustomerView:o,currentPage:h,itemsPerPage:V,filteredCustomers:x,paginatedCustomers:z,totalPages:j,stats:R,customerActivities:L,formatNumber:S,formatDate:O,formatDateTime:B,formatPhoneNumber:q,timeAgo:F,stringToColor:G,getContrastColor:J,getInitials:H,resetFilters:K,addNewCustomer:Q,editCustomer:W,viewCustomer:X,viewCustomerOrders:Y,saveCustomer:Z,toggleCustomerStatus:$,closeModal:T}}},it={class:"customers-management"},at={class:"container-fluid"},rt={class:"d-flex justify-content-between align-items-center mb-4"},dt={class:"card mb-4"},ct={class:"card-body"},ut={class:"row g-3"},mt={class:"col-md-4"},bt={class:"input-group"},vt={class:"col-md-3"},ft={class:"col-md-3"},Ct={class:"col-md-2 d-flex align-items-end"},yt={class:"row mb-4"},gt={class:"col-md-3"},pt={class:"card bg-primary bg-opacity-10 border-0"},ht={class:"card-body"},_t={class:"d-flex justify-content-between align-items-center"},wt={class:"mb-0"},xt={class:"col-md-3"},kt={class:"card bg-success bg-opacity-10 border-0"},At={class:"card-body"},Nt={class:"d-flex justify-content-between align-items-center"},Vt={class:"mb-0"},Pt={class:"col-md-3"},Dt={class:"card bg-warning bg-opacity-10 border-0"},Mt={class:"card-body"},St={class:"d-flex justify-content-between align-items-center"},Tt={class:"mb-0"},It={class:"col-md-3"},Ut={class:"card bg-info bg-opacity-10 border-0"},Et={class:"card-body"},zt={class:"d-flex justify-content-between align-items-center"},jt={class:"mb-0"},Rt={class:"card"},Lt={class:"card-body p-0"},Ot={class:"table-responsive"},Bt={class:"table table-hover align-middle mb-0"},qt={key:0},Ft={class:"d-flex align-items-center"},Gt={class:"avatar me-3"},Jt={class:"mb-0"},Ht={class:"text-muted"},Kt={key:0},Qt=["title"],Wt={key:1,class:"text-muted"},Xt={key:1,class:"text-muted"},Yt={key:0},Zt={class:"text-muted"},$t={key:1,class:"text-muted"},te={class:"text-end fw-medium"},ee={class:"badge bg-light text-dark"},se={class:"text-end"},oe={class:"btn-group btn-group-sm"},le=["onClick"],ne=["onClick"],ie=["onClick","title"],ae={class:"d-flex justify-content-between align-items-center p-3 border-top"},re={class:"text-muted"},de={class:"pagination mb-0"},ce=["onClick"],ue={class:"modal-dialog modal-lg"},me={class:"modal-content"},be={class:"modal-header"},ve={class:"modal-title"},fe={class:"modal-body"},Ce={class:"row"},ye={class:"col-md-6"},ge={class:"mb-3"},pe={class:"d-flex gap-3"},he={class:"form-check"},_e={class:"form-check"},we={class:"col-md-6"},xe={class:"mb-3"},ke={class:"form-check form-switch"},Ae={key:0},Ne={class:"row"},Ve={class:"col-md-6"},Pe={class:"mb-3"},De={class:"col-md-6"},Me={class:"mb-3"},Se=["placeholder"],Te={class:"mb-3"},Ie={key:1},Ue={class:"row"},Ee={class:"col-md-6"},ze={class:"mb-3"},je={class:"col-md-6"},Re={class:"mb-3"},Le={class:"row"},Oe={class:"col-md-6"},Be={class:"mb-3"},qe={class:"col-md-6"},Fe={class:"mb-3"},Ge={class:"mb-3"},Je={class:"row"},He={class:"col-md-6"},Ke={class:"mb-3"},Qe={class:"col-md-6"},We={class:"mb-3"},Xe={class:"mb-3"},Ye={class:"d-flex justify-content-end gap-2"},Ze={type:"submit",class:"btn btn-primary"},$e={key:0,class:"modal-backdrop fade show"},ts={class:"modal-dialog modal-lg"},es={class:"modal-content"},ss={class:"modal-header"},os={class:"btn-group"},ls={key:0,class:"modal-body"},ns={class:"row mb-4"},is={class:"col-md-8"},as={class:"d-flex align-items-center mb-3"},rs={class:"avatar me-3",style:{width:"80px",height:"80px"}},ds={class:"mb-1"},cs={class:"badge bg-light text-dark ms-2"},us={class:"row mb-3"},ms={class:"col-md-6"},bs={key:0,class:"mb-1"},vs={key:1,class:"mb-1"},fs={key:2,class:"mb-1"},Cs={key:3,class:"mb-0"},ys={class:"col-md-6"},gs={key:0,class:"mb-1"},ps={class:"mb-1"},hs={key:1,class:"mb-0"},_s={key:0,class:"mb-3"},ws={class:"p-3 bg-light rounded"},xs={class:"col-md-4"},ks={class:"card border-0 bg-light"},As={class:"card-body text-center"},Ns={class:"d-flex justify-content-around mb-4"},Vs={class:"h2 mb-0"},Ps={class:"h2 mb-0"},Ds={class:"timeline"},Ms={class:"timeline-content"},Ss={class:"d-flex justify-content-between"},Ts={class:"mb-1"},Is={class:"text-muted"},Us={class:"mb-0"},Es={key:0,class:"mt-1"},zs={class:"text-muted"},js={key:0,class:"text-center py-3 text-muted"},Rs={class:"modal-footer"},Ls={key:1,class:"modal-backdrop fade show"};function Os(c,e,k,s,A,p){return r(),a("div",it,[t("div",at,[t("div",rt,[e[30]||(e[30]=t("div",null,[t("h2",{class:"mb-1"},"Clientes"),t("p",{class:"text-muted mb-0"},"Gestión de clientes y su historial")],-1)),t("div",null,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...o)=>s.addNewCustomer&&s.addNewCustomer(...o))},[...e[29]||(e[29]=[t("i",{class:"bi bi-plus-lg me-1"},null,-1),d(" Nuevo Cliente ",-1)])])])]),t("div",dt,[t("div",ct,[t("div",ut,[t("div",mt,[e[32]||(e[32]=t("label",{class:"form-label"},"Buscar",-1)),t("div",bt,[e[31]||(e[31]=t("span",{class:"input-group-text"},[t("i",{class:"bi bi-search"})],-1)),u(t("input",{type:"text",class:"form-control",placeholder:"Buscar clientes...","onUpdate:modelValue":e[1]||(e[1]=o=>s.filters.search=o)},null,512),[[y,s.filters.search]])])]),t("div",vt,[e[34]||(e[34]=t("label",{class:"form-label"},"Tipo",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=o=>s.filters.type=o)},[...e[33]||(e[33]=[t("option",{value:""},"Todos",-1),t("option",{value:"individual"},"Particulares",-1),t("option",{value:"business"},"Empresas",-1)])],512),[[I,s.filters.type]])]),t("div",ft,[e[36]||(e[36]=t("label",{class:"form-label"},"Estado",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=o=>s.filters.status=o)},[...e[35]||(e[35]=[t("option",{value:""},"Todos",-1),t("option",{value:"active"},"Activos",-1),t("option",{value:"inactive"},"Inactivos",-1)])],512),[[I,s.filters.status]])]),t("div",Ct,[t("button",{class:"btn btn-outline-secondary w-100",onClick:e[4]||(e[4]=(...o)=>s.resetFilters&&s.resetFilters(...o))},[...e[37]||(e[37]=[t("i",{class:"bi bi-arrow-counterclockwise me-1"},null,-1),d(" Limpiar ",-1)])])])])])]),t("div",yt,[t("div",gt,[t("div",pt,[t("div",ht,[t("div",_t,[t("div",null,[e[38]||(e[38]=t("h6",{class:"text-muted mb-1"},"Total Clientes",-1)),t("h3",wt,i(s.stats.totalCustomers),1)]),e[39]||(e[39]=t("div",{class:"bg-primary bg-opacity-25 p-3 rounded"},[t("i",{class:"bi bi-people text-primary",style:{"font-size":"1.5rem"}})],-1))])])])]),t("div",xt,[t("div",kt,[t("div",At,[t("div",Nt,[t("div",null,[e[40]||(e[40]=t("h6",{class:"text-muted mb-1"},"Clientes Activos",-1)),t("h3",Vt,i(s.stats.activeCustomers),1)]),e[41]||(e[41]=t("div",{class:"bg-success bg-opacity-25 p-3 rounded"},[t("i",{class:"bi bi-person-check text-success",style:{"font-size":"1.5rem"}})],-1))])])])]),t("div",Pt,[t("div",Dt,[t("div",Mt,[t("div",St,[t("div",null,[e[42]||(e[42]=t("h6",{class:"text-muted mb-1"},"Clientes Nuevos (30d)",-1)),t("h3",Tt,i(s.stats.newCustomers),1)]),e[43]||(e[43]=t("div",{class:"bg-warning bg-opacity-25 p-3 rounded"},[t("i",{class:"bi bi-person-plus text-warning",style:{"font-size":"1.5rem"}})],-1))])])])]),t("div",It,[t("div",Ut,[t("div",Et,[t("div",zt,[t("div",null,[e[44]||(e[44]=t("h6",{class:"text-muted mb-1"},"Valor Promedio",-1)),t("h3",jt,"$"+i(s.formatNumber(s.stats.avgOrderValue)),1)]),e[45]||(e[45]=t("div",{class:"bg-info bg-opacity-25 p-3 rounded"},[t("i",{class:"bi bi-cash-coin text-info",style:{"font-size":"1.5rem"}})],-1))])])])])]),t("div",Rt,[t("div",Lt,[t("div",Ot,[t("table",Bt,[e[51]||(e[51]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Cliente"),t("th",null,"Contacto"),t("th",null,"Última Compra"),t("th",{class:"text-end"},"Total Gastado"),t("th",null,"Pedidos"),t("th",null,"Estado"),t("th",{class:"text-end"},"Acciones")])],-1)),t("tbody",null,[s.filteredCustomers.length===0?(r(),a("tr",qt,[...e[46]||(e[46]=[t("td",{colspan:"7",class:"text-center py-4"},[t("div",{class:"text-muted"},[t("i",{class:"bi bi-people",style:{"font-size":"2rem"}}),t("p",{class:"mt-2 mb-0"},"No se encontraron clientes")])],-1)])])):b("",!0),(r(!0),a(D,null,M(s.paginatedCustomers,o=>(r(),a("tr",{key:o.id},[t("td",null,[t("div",Ft,[t("div",Gt,[t("span",{class:"avatar-initial rounded-circle",style:U({backgroundColor:s.stringToColor(o.type==="business"?o.businessName:`${o.firstName} ${o.lastName}`),color:s.getContrastColor(s.stringToColor(o.type==="business"?o.businessName:`${o.firstName} ${o.lastName}`))})},i(o.type==="business"?(o.businessName||"").charAt(0).toUpperCase():(o.firstName||"").charAt(0).toUpperCase()),5)]),t("div",null,[t("h6",Jt,i(o.type==="business"?o.businessName:`${o.firstName} ${o.lastName}`),1),t("small",Ht,i(o.type==="business"?"Empresa":"Particular"),1)])])]),t("td",null,[o.email||o.phone?(r(),a("div",Kt,[o.email?(r(),a("div",{key:0,class:"text-truncate",style:{"max-width":"200px"},title:o.email},[e[47]||(e[47]=t("i",{class:"bi bi-envelope me-1 text-muted"},null,-1)),d(" "+i(o.email),1)],8,Qt)):b("",!0),o.phone?(r(),a("div",Wt,[e[48]||(e[48]=t("i",{class:"bi bi-telephone me-1"},null,-1)),d(" "+i(s.formatPhoneNumber(o.phone)),1)])):b("",!0)])):(r(),a("span",Xt,"Sin contacto"))]),t("td",null,[o.lastPurchase?(r(),a("div",Yt,[t("div",null,i(s.formatDate(o.lastPurchase)),1),t("small",Zt,"Hace "+i(s.timeAgo(o.lastPurchase)),1)])):(r(),a("span",$t,"Sin compras"))]),t("td",te,i(o.totalSpent?"$"+s.formatNumber(o.totalSpent):"-"),1),t("td",null,[t("span",ee,i(o.orderCount||0)+" pedidos ",1)]),t("td",null,[t("span",{class:g(["badge",o.isActive?"bg-success bg-opacity-10 text-success":"bg-secondary bg-opacity-10 text-secondary"])},i(o.isActive?"Activo":"Inactivo"),3)]),t("td",se,[t("div",oe,[t("button",{class:"btn btn-outline-primary",onClick:h=>s.viewCustomer(o),title:"Ver detalles"},[...e[49]||(e[49]=[t("i",{class:"bi bi-eye"},null,-1)])],8,le),t("button",{class:"btn btn-outline-secondary",onClick:h=>s.editCustomer(o),title:"Editar"},[...e[50]||(e[50]=[t("i",{class:"bi bi-pencil"},null,-1)])],8,ne),t("button",{class:g(["btn",o.isActive?"btn-outline-warning":"btn-outline-success"]),onClick:h=>s.toggleCustomerStatus(o),title:o.isActive?"Desactivar":"Activar"},[t("i",{class:g(o.isActive?"bi-person-x":"bi-person-check")},null,2)],10,ie)])])]))),128))])])]),t("div",ae,[t("div",re," Mostrando "+i(Math.min((s.currentPage-1)*s.itemsPerPage+1,s.filteredCustomers.length))+" a "+i(Math.min(s.currentPage*s.itemsPerPage,s.filteredCustomers.length))+" de "+i(s.filteredCustomers.length)+" clientes ",1),t("nav",null,[t("ul",de,[t("li",{class:g(["page-item",{disabled:s.currentPage===1}])},[t("button",{class:"page-link",onClick:e[5]||(e[5]=o=>s.currentPage--)},"Anterior")],2),(r(!0),a(D,null,M(s.totalPages,o=>(r(),a("li",{key:o,class:g(["page-item",{active:s.currentPage===o}])},[t("button",{class:"page-link",onClick:h=>s.currentPage=o},i(o),9,ce)],2))),128)),t("li",{class:g(["page-item",{disabled:s.currentPage===s.totalPages}])},[t("button",{class:"page-link",onClick:e[6]||(e[6]=o=>s.currentPage++)},"Siguiente")],2)])])])])])]),t("div",{class:g(["modal fade",{"show d-block":s.showCustomerModal}]),tabindex:"-1"},[t("div",ue,[t("div",me,[t("div",be,[t("h5",ve,i(s.isEditing?"Editar Cliente":"Nuevo Cliente"),1),t("button",{type:"button",class:"btn-close",onClick:e[7]||(e[7]=(...o)=>s.closeModal&&s.closeModal(...o))})]),t("div",fe,[t("form",{onSubmit:e[23]||(e[23]=st((...o)=>s.saveCustomer&&s.saveCustomer(...o),["prevent"]))},[t("div",Ce,[t("div",ye,[t("div",ge,[e[54]||(e[54]=t("label",{class:"form-label"},[d("Tipo de Cliente "),t("span",{class:"text-danger"},"*")],-1)),t("div",pe,[t("div",he,[u(t("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":e[8]||(e[8]=o=>s.currentCustomer.type=o),value:"individual",id:"typeIndividual",required:""},null,512),[[E,s.currentCustomer.type]]),e[52]||(e[52]=t("label",{class:"form-check-label",for:"typeIndividual"}," Particular ",-1))]),t("div",_e,[u(t("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":e[9]||(e[9]=o=>s.currentCustomer.type=o),value:"business",id:"typeBusiness"},null,512),[[E,s.currentCustomer.type]]),e[53]||(e[53]=t("label",{class:"form-check-label",for:"typeBusiness"}," Empresa ",-1))])])])]),t("div",we,[t("div",xe,[t("label",ke,[u(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>s.currentCustomer.isActive=o)},null,512),[[ot,s.currentCustomer.isActive]]),e[55]||(e[55]=t("span",{class:"form-check-label"},"Cliente Activo",-1))])])])]),s.currentCustomer.type==="business"?(r(),a("div",Ae,[t("div",Ne,[t("div",Ve,[t("div",Pe,[e[56]||(e[56]=t("label",{class:"form-label"},[d("Nombre de la Empresa "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=o=>s.currentCustomer.businessName=o),required:""},null,512),[[y,s.currentCustomer.businessName]])])]),t("div",De,[t("div",Me,[e[57]||(e[57]=t("label",{class:"form-label"},"RUT/RUC",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[12]||(e[12]=o=>s.currentCustomer.taxId=o),placeholder:s.currentCustomer.type==="business"?"RUT con guión y DV":"RUT sin puntos con guión y DV"},null,8,Se),[[y,s.currentCustomer.taxId]])])])]),t("div",Te,[e[58]||(e[58]=t("label",{class:"form-label"},"Nombre del Contacto",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[13]||(e[13]=o=>s.currentCustomer.contactName=o)},null,512),[[y,s.currentCustomer.contactName]])])])):(r(),a("div",Ie,[t("div",Ue,[t("div",Ee,[t("div",ze,[e[59]||(e[59]=t("label",{class:"form-label"},[d("Nombre "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[14]||(e[14]=o=>s.currentCustomer.firstName=o),required:""},null,512),[[y,s.currentCustomer.firstName]])])]),t("div",je,[t("div",Re,[e[60]||(e[60]=t("label",{class:"form-label"},[d("Apellido "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[15]||(e[15]=o=>s.currentCustomer.lastName=o),required:""},null,512),[[y,s.currentCustomer.lastName]])])])])])),t("div",Le,[t("div",Oe,[t("div",Be,[e[61]||(e[61]=t("label",{class:"form-label"},[d("Email "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{type:"email",class:"form-control","onUpdate:modelValue":e[16]||(e[16]=o=>s.currentCustomer.email=o),required:""},null,512),[[y,s.currentCustomer.email]])])]),t("div",qe,[t("div",Fe,[e[62]||(e[62]=t("label",{class:"form-label"},"Teléfono",-1)),u(t("input",{type:"tel",class:"form-control","onUpdate:modelValue":e[17]||(e[17]=o=>s.currentCustomer.phone=o)},null,512),[[y,s.currentCustomer.phone]])])])]),t("div",Ge,[e[63]||(e[63]=t("label",{class:"form-label"},"Dirección",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[18]||(e[18]=o=>s.currentCustomer.address=o),placeholder:"Calle y número"},null,512),[[y,s.currentCustomer.address]])]),t("div",Je,[t("div",He,[t("div",Ke,[e[64]||(e[64]=t("label",{class:"form-label"},"Ciudad",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[19]||(e[19]=o=>s.currentCustomer.city=o)},null,512),[[y,s.currentCustomer.city]])])]),t("div",Qe,[t("div",We,[e[65]||(e[65]=t("label",{class:"form-label"},"Código Postal",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[20]||(e[20]=o=>s.currentCustomer.postalCode=o)},null,512),[[y,s.currentCustomer.postalCode]])])])]),t("div",Xe,[e[66]||(e[66]=t("label",{class:"form-label"},"Notas",-1)),u(t("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":e[21]||(e[21]=o=>s.currentCustomer.notes=o),placeholder:"Notas adicionales sobre el cliente..."},null,512),[[y,s.currentCustomer.notes]])]),t("div",Ye,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[22]||(e[22]=(...o)=>s.closeModal&&s.closeModal(...o))}," Cancelar "),t("button",Ze,i(s.isEditing?"Actualizar Cliente":"Guardar Cliente"),1)])],32)])])])],2),s.showCustomerModal?(r(),a("div",$e)):b("",!0),t("div",{class:g(["modal fade",{"show d-block":s.showCustomerDetails}]),tabindex:"-1"},[t("div",ts,[t("div",es,[t("div",ss,[e[68]||(e[68]=t("h5",{class:"modal-title"},"Detalles del Cliente",-1)),t("div",os,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:e[24]||(e[24]=o=>s.editCustomer(s.currentCustomerView))},[...e[67]||(e[67]=[t("i",{class:"bi bi-pencil"},null,-1),d(" Editar ",-1)])]),t("button",{type:"button",class:g(["btn",s.currentCustomerView?.isActive?"btn-outline-warning":"btn-outline-success"]),onClick:e[25]||(e[25]=o=>s.toggleCustomerStatus(s.currentCustomerView))},[t("i",{class:g(s.currentCustomerView?.isActive?"bi-person-x":"bi-person-check")},null,2),d(" "+i(s.currentCustomerView?.isActive?"Desactivar":"Activar"),1)],2),t("button",{type:"button",class:"btn-close",onClick:e[26]||(e[26]=o=>s.showCustomerDetails=!1)})])]),s.currentCustomerView?(r(),a("div",ls,[t("div",ns,[t("div",is,[t("div",as,[t("div",rs,[t("span",{class:"avatar-initial rounded-circle d-flex align-items-center justify-content-center",style:U({backgroundColor:s.stringToColor(s.currentCustomerView.name),color:s.getContrastColor(s.stringToColor(s.currentCustomerView.name)),fontSize:"2rem",width:"100%",height:"100%"})},i(s.getInitials(s.currentCustomerView.name)),5)]),t("div",null,[t("h3",ds,i(s.currentCustomerView.name),1),t("span",{class:g(["badge",s.currentCustomerView.isActive?"bg-success bg-opacity-10 text-success":"bg-secondary bg-opacity-10 text-secondary"])},i(s.currentCustomerView.isActive?"Activo":"Inactivo"),3),t("span",cs,i(s.currentCustomerView.type==="business"?"Empresa":"Particular"),1)])]),t("div",us,[t("div",ms,[e[72]||(e[72]=t("h6",{class:"text-muted mb-2"},"Información de Contacto",-1)),s.currentCustomerView.email?(r(),a("p",bs,[e[69]||(e[69]=t("i",{class:"bi bi-envelope me-2 text-muted"},null,-1)),d(" "+i(s.currentCustomerView.email),1)])):b("",!0),s.currentCustomerView.phone?(r(),a("p",vs,[e[70]||(e[70]=t("i",{class:"bi bi-telephone me-2 text-muted"},null,-1)),d(" "+i(s.formatPhoneNumber(s.currentCustomerView.phone)),1)])):b("",!0),s.currentCustomerView.address?(r(),a("p",fs,[e[71]||(e[71]=t("i",{class:"bi bi-geo-alt me-2 text-muted"},null,-1)),d(" "+i(s.currentCustomerView.address),1)])):b("",!0),s.currentCustomerView.city||s.currentCustomerView.postalCode?(r(),a("p",Cs,i(s.currentCustomerView.city)+" "+i(s.currentCustomerView.postalCode?", "+s.currentCustomerView.postalCode:""),1)):b("",!0)]),t("div",ys,[e[76]||(e[76]=t("h6",{class:"text-muted mb-2"},"Información Adicional",-1)),s.currentCustomerView.taxId?(r(),a("p",gs,[e[73]||(e[73]=t("strong",null,"RUT/RUC:",-1)),d(" "+i(s.currentCustomerView.taxId),1)])):b("",!0),t("p",ps,[e[74]||(e[74]=t("strong",null,"Miembro desde:",-1)),d(" "+i(s.formatDate(s.currentCustomerView.createdAt)),1)]),s.currentCustomerView.lastPurchase?(r(),a("p",hs,[e[75]||(e[75]=t("strong",null,"Última compra:",-1)),d(" "+i(s.formatDate(s.currentCustomerView.lastPurchase)),1)])):b("",!0)])]),s.currentCustomerView.notes?(r(),a("div",_s,[e[77]||(e[77]=t("h6",{class:"text-muted mb-2"},"Notas",-1)),t("div",ws,i(s.currentCustomerView.notes),1)])):b("",!0)]),t("div",xs,[t("div",ks,[t("div",As,[e[81]||(e[81]=t("h6",{class:"text-muted mb-3"},"Resumen de Compras",-1)),t("div",Ns,[t("div",null,[t("div",Vs,i(s.currentCustomerView.orderCount||0),1),e[78]||(e[78]=t("small",{class:"text-muted"},"Pedidos",-1))]),t("div",null,[t("div",Ps,"$"+i(s.formatNumber(s.currentCustomerView.totalSpent||0)),1),e[79]||(e[79]=t("small",{class:"text-muted"},"Total Gastado",-1))])]),t("button",{class:"btn btn-outline-primary w-100 mb-2",onClick:e[27]||(e[27]=o=>s.viewCustomerOrders(s.currentCustomerView))},[...e[80]||(e[80]=[t("i",{class:"bi bi-cart3 me-1"},null,-1),d(" Ver Pedidos ",-1)])]),e[82]||(e[82]=t("button",{class:"btn btn-outline-secondary w-100"},[t("i",{class:"bi bi-envelope me-1"}),d(" Enviar Email ")],-1))])])])]),t("div",null,[e[84]||(e[84]=t("h6",{class:"text-muted mb-3"},"Actividad Reciente",-1)),t("div",Ds,[(r(!0),a(D,null,M(s.customerActivities,(o,h)=>(r(),a("div",{key:h,class:"timeline-item"},[e[83]||(e[83]=t("div",{class:"timeline-marker"},null,-1)),t("div",Ms,[t("div",Ss,[t("h6",Ts,i(o.title),1),t("small",Is,i(s.timeAgo(o.date)),1)]),t("p",Us,i(o.description),1),o.details?(r(),a("div",Es,[t("small",zs,i(o.details),1)])):b("",!0)])]))),128)),s.customerActivities.length===0?(r(),a("div",js," No hay actividad reciente para mostrar ")):b("",!0)])])])):b("",!0),t("div",Rs,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[28]||(e[28]=o=>s.showCustomerDetails=!1)}," Cerrar ")])])])],2),s.showCustomerDetails?(r(),a("div",Ls)):b("",!0)])}const qs=et(nt,[["render",Os],["__scopeId","data-v-0f0e2646"]]);export{qs as default};
