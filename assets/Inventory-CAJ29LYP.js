import{_ as J,c as a,a as t,b as x,d as _,w as u,v as k,k as S,F as y,r as C,t as r,n as I,g as v,h as w,j as d}from"./index-1NJw5fJc.js";const F={name:"Inventory",setup(){const m=v([{id:1,name:"Producto de Ejemplo 1",sku:"PROD001",description:"Descripción del producto de ejemplo",price:9990,stock:15,lowStockThreshold:5,categoryId:1,image:"https://ui-avatars.com/api/?name=Product+1&background=random"}]),o=v([{id:1,name:"Electrónicos"},{id:2,name:"Ropa"},{id:3,name:"Hogar"},{id:4,name:"Deportes"}]),i=v({search:"",category:"",status:""}),e=v(!1),g=v(null),b=v({name:"",sku:"",description:"",price:0,stock:0,lowStockThreshold:5,categoryId:1,image:""}),s=v(1),c=v(10),h=w(()=>m.value.filter(l=>{const n=!i.value.search||l.name.toLowerCase().includes(i.value.search.toLowerCase())||l.sku&&l.sku.toLowerCase().includes(i.value.search.toLowerCase()),f=!i.value.category||l.categoryId===parseInt(i.value.category);let P=!0;return i.value.status==="in-stock"?P=l.stock>l.lowStockThreshold:i.value.status==="low-stock"?P=l.stock>0&&l.stock<=l.lowStockThreshold:i.value.status==="out-of-stock"&&(P=l.stock===0),n&&f&&P})),M=w(()=>Math.ceil(h.value.length/c.value)||1),T=w(()=>{const l=(s.value-1)*c.value,n=l+c.value;return h.value.slice(l,n)}),A=w(()=>h.value.length>0?(s.value-1)*c.value+1:0),N=w(()=>Math.min(s.value*c.value,h.length)),U=l=>{const n=o.value.find(f=>f.id===l);return n?n.name:"Sin categoría"},j=l=>l.stock===0?"Agotado":l.stock<=l.lowStockThreshold?"Poco stock":"En stock",D=l=>l.stock===0?"bg-danger":l.stock<=l.lowStockThreshold?"bg-warning text-dark":"bg-success",V=l=>new Intl.NumberFormat("es-CL").format(l),B=()=>{i.value={search:"",category:"",status:""}},L=()=>{g.value=null,b.value={name:"",sku:"",description:"",price:0,stock:0,lowStockThreshold:5,categoryId:1,image:""},e.value=!0},R=l=>{g.value=l.id,b.value={...l},e.value=!0},W=l=>{console.log("View product:",l)},E=l=>{confirm(`¿Estás seguro de eliminar el producto "${l.name}"?`)&&(m.value=m.value.filter(n=>n.id!==l.id))},z=()=>{if(g.value){const l=m.value.findIndex(n=>n.id===g.value);l!==-1&&(m.value[l]={...b.value})}else{const l=Math.max(0,...m.value.map(n=>n.id))+1;m.value.push({...b.value,id:l})}p()},p=()=>{e.value=!1,g.value=null};return{products:T,categories:o,filters:i,showAddProductModal:e,editingProduct:g,currentProduct:b,currentPage:s,itemsPerPage:c,filteredProducts:h,totalPages:M,startItem:A,endItem:N,getCategoryName:U,getStockStatus:j,getStockStatusClass:D,formatPrice:V,resetFilters:B,addNewProduct:L,editProduct:R,viewProduct:W,confirmDelete:E,saveProduct:z,closeModal:p,handleImageUpload:l=>{const n=l.target.files[0];if(n){const f=new FileReader;f.onload=P=>{b.value.image=P.target.result},f.readAsDataURL(n)}}}}},H={class:"inventory-management"},Z={class:"container-fluid"},G={class:"d-flex justify-content-between align-items-center mb-4"},q={class:"card mb-4"},Y={class:"card-body"},K={class:"row g-3"},X={class:"col-md-4"},O={class:"input-group"},Q={class:"col-md-3"},$=["value"],tt={class:"col-md-3"},ot={class:"col-md-2 d-flex align-items-end"},et={class:"card"},st={class:"card-body p-0"},lt={class:"table-responsive"},nt={class:"table table-hover align-middle mb-0"},at={key:0},rt={class:"d-flex align-items-center"},dt={class:"inventory-item-image me-3"},it=["src","alt"],ct={class:"mb-0"},ut={class:"text-muted"},mt={class:"text-end"},vt={class:"text-center"},gt={class:"text-center"},bt={class:"text-end"},kt={class:"btn-group btn-group-sm"},ft=["onClick"],Pt=["onClick"],yt=["onClick"],It={key:0,class:"d-flex justify-content-between align-items-center p-3 border-top"},ht={class:"text-muted"},_t={key:0},wt={class:"pagination mb-0"},xt=["onClick"],Ct={class:"modal-dialog modal-lg"},St={class:"modal-content"},pt={class:"modal-header"},Mt={class:"modal-title"},Tt={class:"modal-body"},At={class:"row g-3"},Nt={class:"col-md-8"},Ut={class:"mb-3"},jt={class:"row"},Dt={class:"col-md-6"},Vt={class:"mb-3"},Bt={class:"input-group"},Lt={class:"col-md-6"},Rt={class:"mb-3"},Wt=["value"],Et={class:"mb-3"},zt={class:"col-md-4"},Jt={class:"mb-3"},Ft={class:"border rounded p-3 text-center"},Ht=["src"],Zt={class:"col-12"},Gt={class:"row"},qt={class:"col-md-4"},Yt={class:"mb-3"},Kt={class:"col-md-4"},Xt={class:"mb-3"},Ot={class:"col-md-4"},Qt={class:"mb-3"},$t={class:"modal-footer"},to={key:0,class:"modal-backdrop fade show"};function oo(m,o,i,e,g,b){return d(),a("div",H,[t("div",Z,[t("div",G,[o[20]||(o[20]=t("h2",null,"Gestión de Inventario",-1)),t("div",null,[t("button",{class:"btn btn-primary me-2",onClick:o[0]||(o[0]=s=>e.showAddProductModal=!0)},[...o[18]||(o[18]=[t("i",{class:"bi bi-plus-lg me-1"},null,-1),_(" Agregar Producto ",-1)])]),o[19]||(o[19]=t("button",{class:"btn btn-outline-secondary"},[t("i",{class:"bi bi-upload me-1"}),_(" Importar ")],-1))])]),t("div",q,[t("div",Y,[t("div",K,[t("div",X,[o[22]||(o[22]=t("label",{class:"form-label"},"Buscar",-1)),t("div",O,[o[21]||(o[21]=t("span",{class:"input-group-text"},[t("i",{class:"bi bi-search"})],-1)),u(t("input",{type:"text",class:"form-control",placeholder:"Buscar productos...","onUpdate:modelValue":o[1]||(o[1]=s=>e.filters.search=s)},null,512),[[k,e.filters.search]])])]),t("div",Q,[o[24]||(o[24]=t("label",{class:"form-label"},"Categoría",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":o[2]||(o[2]=s=>e.filters.category=s)},[o[23]||(o[23]=t("option",{value:""},"Todas las categorías",-1)),(d(!0),a(y,null,C(e.categories,s=>(d(),a("option",{key:s.id,value:s.id},r(s.name),9,$))),128))],512),[[S,e.filters.category]])]),t("div",tt,[o[26]||(o[26]=t("label",{class:"form-label"},"Estado de inventario",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":o[3]||(o[3]=s=>e.filters.status=s)},[...o[25]||(o[25]=[t("option",{value:""},"Todos",-1),t("option",{value:"in-stock"},"En stock",-1),t("option",{value:"low-stock"},"Poco stock",-1),t("option",{value:"out-of-stock"},"Agotado",-1)])],512),[[S,e.filters.status]])]),t("div",ot,[t("button",{class:"btn btn-outline-secondary w-100",onClick:o[4]||(o[4]=(...s)=>e.resetFilters&&e.resetFilters(...s))},[...o[27]||(o[27]=[t("i",{class:"bi bi-arrow-counterclockwise me-1"},null,-1),_(" Restablecer ",-1)])])])])])]),t("div",et,[t("div",st,[t("div",lt,[t("table",nt,[o[32]||(o[32]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Producto"),t("th",null,"Categoría"),t("th",{class:"text-end"},"Precio"),t("th",{class:"text-center"},"Stock"),t("th",{class:"text-center"},"Estado"),t("th",{class:"text-end"},"Acciones")])],-1)),t("tbody",null,[e.filteredProducts.length===0?(d(),a("tr",at,[...o[28]||(o[28]=[t("td",{colspan:"6",class:"text-center py-4"},[t("div",{class:"text-muted"},[t("i",{class:"bi bi-inbox",style:{"font-size":"2rem"}}),t("p",{class:"mt-2 mb-0"},"No se encontraron productos")])],-1)])])):x("",!0),(d(!0),a(y,null,C(e.filteredProducts,s=>(d(),a("tr",{key:s.id},[t("td",null,[t("div",rt,[t("div",dt,[t("img",{src:s.image||"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNhYWEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cmVjdCB4PSIzIiB5PSIzIiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHJ4PSIyIiByeT0iMiI+PC9yZWN0PjxjaXJjbGUgY3g9IjguNSIgY3k9IjguNSIgcj0iMi41Ij48L2NpcmNsZT48cGF0aCBkPSJNMjEgMTVhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJ2LTRsMTQtN3oiPjwvcGF0aD48L3N2Zz4=",alt:s.name,class:"rounded"},null,8,it)]),t("div",null,[t("h6",ct,r(s.name),1),t("small",ut,"SKU: "+r(s.sku||"N/A"),1)])])]),t("td",null,r(e.getCategoryName(s.categoryId)),1),t("td",mt,"$"+r(e.formatPrice(s.price)),1),t("td",vt,[t("span",{class:I({"text-danger":s.stock<=s.lowStockThreshold})},r(s.stock),3)]),t("td",gt,[t("span",{class:I([e.getStockStatusClass(s),"badge"])},r(e.getStockStatus(s)),3)]),t("td",bt,[t("div",kt,[t("button",{class:"btn btn-outline-primary",onClick:c=>e.editProduct(s)},[...o[29]||(o[29]=[t("i",{class:"bi bi-pencil"},null,-1)])],8,ft),t("button",{class:"btn btn-outline-secondary",onClick:c=>e.viewProduct(s)},[...o[30]||(o[30]=[t("i",{class:"bi bi-eye"},null,-1)])],8,Pt),t("button",{class:"btn btn-outline-danger",onClick:c=>e.confirmDelete(s)},[...o[31]||(o[31]=[t("i",{class:"bi bi-trash"},null,-1)])],8,yt)])])]))),128))])])]),e.filteredProducts.length>0?(d(),a("div",It,[t("div",ht,[e.filteredProducts.length>0?(d(),a(y,{key:0},[_(" Mostrando "+r(e.startItem)+" a "+r(e.endItem)+" de "+r(e.filteredProducts.length)+" "+r(e.filteredProducts.length===1?"producto":"productos"),1)],64)):(d(),a(y,{key:1},[_(" No hay productos para mostrar ")],64))]),e.totalPages>1?(d(),a("nav",_t,[t("ul",wt,[t("li",{class:I(["page-item",{disabled:e.currentPage===1}])},[t("button",{class:"page-link",onClick:o[5]||(o[5]=s=>e.currentPage--)},"Anterior")],2),(d(!0),a(y,null,C(e.totalPages,s=>(d(),a("li",{key:s,class:I(["page-item",{active:e.currentPage===s}])},[t("button",{class:"page-link",onClick:c=>e.currentPage=s},r(s),9,xt)],2))),128)),t("li",{class:I(["page-item",{disabled:e.currentPage===e.totalPages}])},[t("button",{class:"page-link",onClick:o[6]||(o[6]=s=>e.currentPage++)},"Siguiente")],2)])])):x("",!0)])):x("",!0)])])]),t("div",{class:I(["modal fade",{"show d-block":e.showAddProductModal}]),tabindex:"-1"},[t("div",Ct,[t("div",St,[t("div",pt,[t("h5",Mt,r(e.editingProduct?"Editar Producto":"Agregar Nuevo Producto"),1),t("button",{type:"button",class:"btn-close",onClick:o[7]||(o[7]=(...s)=>e.closeModal&&e.closeModal(...s))})]),t("div",Tt,[t("div",At,[t("div",Nt,[t("div",Ut,[o[33]||(o[33]=t("label",{class:"form-label"},"Nombre del Producto",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[8]||(o[8]=s=>e.currentProduct.name=s),required:""},null,512),[[k,e.currentProduct.name]])]),t("div",jt,[t("div",Dt,[t("div",Vt,[o[35]||(o[35]=t("label",{class:"form-label"},"Precio",-1)),t("div",Bt,[o[34]||(o[34]=t("span",{class:"input-group-text"},"$",-1)),u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[9]||(o[9]=s=>e.currentProduct.price=s),min:"0",step:"0.01",required:""},null,512),[[k,e.currentProduct.price,void 0,{number:!0}]])])])]),t("div",Lt,[t("div",Rt,[o[36]||(o[36]=t("label",{class:"form-label"},"Categoría",-1)),u(t("select",{class:"form-select","onUpdate:modelValue":o[10]||(o[10]=s=>e.currentProduct.categoryId=s),required:""},[(d(!0),a(y,null,C(e.categories,s=>(d(),a("option",{key:s.id,value:s.id},r(s.name),9,Wt))),128))],512),[[S,e.currentProduct.categoryId]])])])]),t("div",Et,[o[37]||(o[37]=t("label",{class:"form-label"},"Descripción",-1)),u(t("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":o[11]||(o[11]=s=>e.currentProduct.description=s)},null,512),[[k,e.currentProduct.description]])])]),t("div",zt,[t("div",Jt,[o[38]||(o[38]=t("label",{class:"form-label"},"Imagen del Producto",-1)),t("div",Ft,[t("img",{src:e.currentProduct.image||`https://ui-avatars.com/api/?name=${e.currentProduct.name?encodeURIComponent(e.currentProduct.name):"P"}&background=random`,class:"img-fluid mb-2",style:{"max-height":"150px"}},null,8,Ht),t("input",{type:"file",class:"form-control",onChange:o[12]||(o[12]=(...s)=>e.handleImageUpload&&e.handleImageUpload(...s))},null,32)])])]),t("div",Zt,[t("div",Gt,[t("div",qt,[t("div",Yt,[o[39]||(o[39]=t("label",{class:"form-label"},"Cantidad en Stock",-1)),u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[13]||(o[13]=s=>e.currentProduct.stock=s),min:"0",required:""},null,512),[[k,e.currentProduct.stock,void 0,{number:!0}]])])]),t("div",Kt,[t("div",Xt,[o[40]||(o[40]=t("label",{class:"form-label"},"Stock Mínimo",-1)),u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[14]||(o[14]=s=>e.currentProduct.lowStockThreshold=s),min:"1",required:""},null,512),[[k,e.currentProduct.lowStockThreshold,void 0,{number:!0}]]),o[41]||(o[41]=t("small",{class:"text-muted"},"Alerta cuando el stock esté por debajo de este número",-1))])]),t("div",Ot,[t("div",Qt,[o[42]||(o[42]=t("label",{class:"form-label"},"SKU",-1)),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[15]||(o[15]=s=>e.currentProduct.sku=s)},null,512),[[k,e.currentProduct.sku]])])])])])])]),t("div",$t,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:o[16]||(o[16]=(...s)=>e.closeModal&&e.closeModal(...s))},"Cancelar"),t("button",{type:"button",class:"btn btn-primary",onClick:o[17]||(o[17]=(...s)=>e.saveProduct&&e.saveProduct(...s))},r(e.editingProduct?"Actualizar Producto":"Agregar Producto"),1)])])])],2),e.showAddProductModal?(d(),a("div",to)):x("",!0)])}const lo=J(F,[["render",oo],["__scopeId","data-v-f8d2d055"]]);export{lo as default};
